import axios from"axios";import moment from"moment";import Noty from"noty";export function initR(e){function t(e){let t=Object.values(e);return t.map(e=>`\n                <p>${e.info.vehicle_type}</p>\n            `).join("")}function n(e){return e.map(e=>`\n                <tr>\n    <td class="border px-4 py-2 text-green-900">\n        <p><a class="link focus:outline-none text-green-600" href="/rider/trackDelivery/${e._id}">${e.tracking_id}</a></p>\n        <div>${t(e.items)}</div>\n\n</div>\n    </td>\n    <td class="border px-4 py-2">${e.supplier_id.name}</td>\n    <td class="border px-4 py-2">${e.supplier_id.company_name}</td>\n    <td class="border px-4 py-2">${e.phone}</td>\n    <td class="border px-4 py-2">${e.pickup_address}</td>\n    <td class="border px-4 py-2">${e.dropoff_address}</td>\n    <td class="border px-4 py-2">\n        <div class="inline-block relative w-64">\n            <form action="/rider/order/status" method="POST">\n                <input type="hidden" name="order_id" value="${e._id}">\n                <select name="status" onchange="this.form.submit()" \n                class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">\n                    <option value="confirmed" ${"confirmed"===e.status?"selected":""}>\n                        Confirmed</option>\n                    <option value="vehicle_ready" ${"vehicle_ready"===e.status?"selected":""}>\n                        Out for delivery</option>\n                    <option value="arriving" ${"arriving"===e.status?"selected":""}>\n                        Arriving at pickup point</option>\n                    <option value="pickup_point" ${"pickup_point"===e.status?"selected":""}>\n                        Loading</option>\n                    <option value="shipping" ${"shipping"===e.status?"selected":""}>\n                        Shipping</option>\n                    <option value="delivered" ${"delivered"===e.status?"selected":""}>\n                        Delivered\n                    </option>\n                </select>\n            </form>\n            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">\n                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n                    <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />\n                </svg>\n            </div>\n        </div>\n    </td>\n    <td class="border px-4 py-2">\n        ${moment(e.createdAt).format("ddd MMM Do, hh:mm A")}\n    </td>\n</tr>\n\n        `).join("")}const o=document.querySelector("#orderTableBody"),r=document.querySelector("#orderTableBodycomp"),i=document.querySelector("#orderTableBodyCancelled");let d,s,a,p=[],l=[],c=[];axios.get("/rider/orders",{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{p=e.data,d=n(p),o.innerHTML=d}).catch(e=>{console.log(e)}),axios.get("/rider/completed_orders",{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{l=e.data,s=n(l),r.innerHTML=s}).catch(e=>{console.log(e)}),axios.get("/rider/cancelled_orders",{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{c=e.data,a=n(c),i.innerHTML=a}).catch(e=>{console.log(e)}),e.on("parcelDelivery",e=>{new Noty({type:"success",timeout:1e3,progressBar:!1,text:"New Delivery added!",progressBar:!1}).show(),p.unshift(e),o.innerHTML="",o.innerHTML=n(p)})}